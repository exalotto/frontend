(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[220],{3928:(e,t,n)=>{Promise.resolve().then(n.bind(n,9911)),Promise.resolve().then(n.bind(n,8121)),Promise.resolve().then(n.bind(n,9026)),Promise.resolve().then(n.bind(n,8155)),Promise.resolve().then(n.bind(n,8810)),Promise.resolve().then(n.bind(n,8506)),Promise.resolve().then(n.bind(n,1805)),Promise.resolve().then(n.bind(n,5366)),Promise.resolve().then(n.bind(n,5399)),Promise.resolve().then(n.t.bind(n,1491,23)),Promise.resolve().then(n.t.bind(n,8173,23)),Promise.resolve().then(n.t.bind(n,7970,23)),Promise.resolve().then(n.bind(n,4798)),Promise.resolve().then(n.t.bind(n,400,23))},9911:(e,t,n)=>{"use strict";n.d(t,{ICOForm:()=>f});var a=n(5155),i=n(2115),s=n(2841),r=n(6121),u=n(3667),l=n(5772),p=n(3818),o=n(8810),y=n(6662),m=n(4074),d=n(113);let c=JSON.parse('{"HV":[{"inputs":[{"internalType":"contract IERC20","name":"_currencyToken","type":"address"},{"internalType":"contract LotteryToken","name":"_token","type":"address"},{"internalType":"contract Lottery","name":"_lottery","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"EnforcedPause","type":"error"},{"inputs":[],"name":"ExpectedPause","type":"error"},{"inputs":[{"internalType":"uint256","name":"got","type":"uint256"},{"internalType":"uint256","name":"want","type":"uint256"}],"name":"IncorrectValueError","type":"error"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"balance","type":"uint256"}],"name":"InsufficientBalanceError","type":"error"},{"inputs":[{"internalType":"uint256","name":"available","type":"uint256"},{"internalType":"uint256","name":"requested","type":"uint256"}],"name":"InsufficientTokensError","type":"error"},{"inputs":[],"name":"InvalidStateError","type":"error"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"OwnableInvalidOwner","type":"error"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"OwnableUnauthorizedAccount","type":"error"},{"inputs":[],"name":"ReentrancyGuardReentrantCall","type":"error"},{"inputs":[{"internalType":"address","name":"token","type":"address"}],"name":"SafeERC20FailedOperation","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"account","type":"address"}],"name":"Paused","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"account","type":"address"}],"name":"Unpaused","type":"event"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"close","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"currencyToken","outputs":[{"internalType":"contract IERC20","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenAmount","type":"uint256"}],"name":"getPriceFor","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"isOpen","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lottery","outputs":[{"internalType":"contract Lottery","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokensToSell","type":"uint256"},{"internalType":"uint256","name":"_price","type":"uint256"}],"name":"open","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"pause","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"paused","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"price","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"purchase","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"nonce","type":"uint256"},{"internalType":"uint256","name":"expiry","type":"uint256"},{"internalType":"uint8","name":"v","type":"uint8"},{"internalType":"bytes32","name":"r","type":"bytes32"},{"internalType":"bytes32","name":"s","type":"bytes32"}],"name":"purchaseWithDaiPermit","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"deadline","type":"uint256"},{"internalType":"uint8","name":"v","type":"uint8"},{"internalType":"bytes32","name":"r","type":"bytes32"},{"internalType":"bytes32","name":"s","type":"bytes32"}],"name":"purchaseWithPermit","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"token","outputs":[{"internalType":"contract LotteryToken","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"tokensForSale","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"tokensSold","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"unpause","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"withdrawAll","outputs":[],"stateMutability":"nonpayable","type":"function"}]}');async function b(e,t,n){let a=await t.methods.currencyToken().call(),i=new e.eth.Contract(d.HV,a),s=new e.eth.Contract(m.HV,a),r={name:""+await i.methods.name().call(),version:"1",verifyingContract:i.options.address,salt:e.utils.padLeft(e.utils.toBigInt(await e.eth.getChainId()),64)},u=e.utils.toBigInt(await s.methods.getNonce(n).call()),{timestamp:l}=await e.eth.getBlock(),p=Number(l)+86400,o={holder:n,spender:t.options.address,nonce:u.toString(10),expiry:p,allowed:!0},y=await e.eth.signTypedData(n,{domain:r,message:o,primaryType:"Permit",types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"}],Permit:[{name:"holder",type:"address"},{name:"spender",type:"address"},{name:"nonce",type:"uint256"},{name:"expiry",type:"uint256"},{name:"allowed",type:"bool"}]}});return{nonce:u,expiry:p,r:y.slice(0,66),s:"0x"+y.slice(66,130),v:parseInt(y.slice(130,132),16)}}let h=e=>{let{ico:t}=e,{library:n,account:m}=(0,l.Yu)(),d=e=>n.utils.fromWei(e,"ether"),c=e=>n.utils.toBigInt(n.utils.toWei(e,"ether")),[h,f]=(0,i.useState)(null),[T,v]=(0,i.useState)(null),[w,x]=(0,i.useState)(!1),[A,j]=(0,i.useState)(""),[,P]=(0,i.useState)(0n),[g,C]=(0,i.useState)("0"),[M,E]=(0,i.useState)(0n),[k,S]=(0,i.useState)("0"),[,O]=(0,i.useState)(0),{showModal:I}=(0,o.U8)(),N=e=>{j(e);let t=c(e);if(P(t),h){let e=0xde0b6b3a7640000n*t/h;C(d(e)),E(e);let n=(0,y.gP)(e,0x33b2e3c9fd0803ce8000000n);S(""+100*n),O(n)}else C(""),E(0n),S(""),O(0)},L=e=>{C(e);let t=c(e);if(E(t),h){let e=t*h/0xde0b6b3a7640000n;j(d(e)),P(e)}else j(""),P(0n);let n=(0,y.gP)(t,0x33b2e3c9fd0803ce8000000n);S(""+100*n),O(n)},B=e=>{S(e);let t=parseFloat(e)/100;O(t);let a=c(t)*n.utils.toBigInt(d(0x33b2e3c9fd0803ce8000000n));if(C(d(a)),E(a),h){let e=a*h/0xde0b6b3a7640000n;j(d(e)),P(e)}else j(""),P(0n)};return(0,y.Zu)(async()=>{f(n.utils.toBigInt(await t.methods.price().call())),x(await t.methods.isOpen().call())},[n,t]),(0,y.Zu)(async()=>{m?v(n.utils.toBigInt(await t.methods.balanceOf(m).call())):v(null)},[n,m,t]),(0,i.useEffect)(()=>{B("1")},[n,h]),(0,a.jsxs)(s.A,{className:"mb-1",onSubmit:async e=>{if(e.preventDefault(),e.target.checkValidity()){if(m){let{nonce:e,expiry:a,r:i,s,v:r}=await b(n,t,m);await t.methods.purchaseWithDai(M,e,a,r,i,s).send({from:m})}else I("wallet")}},children:[(0,a.jsxs)(s.A.Group,{as:r.A,className:"mx-sm-3 mb-3",children:[(0,a.jsx)(s.A.Label,{column:!0,sm:3,children:"Current EXL price:"}),(0,a.jsx)(u.A,{children:(0,a.jsx)(s.A.Control,{type:"static",disabled:!0,value:h?"".concat((0,y.TZ)(n,h)," Dai"):""})})]}),null!==T?(0,a.jsxs)(s.A.Group,{as:r.A,className:"mx-sm-3 mb-3",children:[(0,a.jsx)(s.A.Label,{column:!0,sm:3,children:"Your EXL balance:"}),(0,a.jsx)(u.A,{children:(0,a.jsx)(s.A.Control,{type:"static",disabled:!0,value:null!==T?"".concat((0,y.TZ)(n,T)," EXL"):""})})]}):null,(0,a.jsxs)(r.A,{className:"mb-4",children:[(0,a.jsxs)(s.A.Group,{as:u.A,className:"mx-sm-3",children:[(0,a.jsx)(s.A.Label,{children:"Dai"}),(0,a.jsx)(s.A.Control,{type:"text",disabled:null===h,required:!0,pattern:"[0-9]*(\\.[0-9]*)?",value:A,onChange:e=>{let{target:t}=e;return N(t.value)}})]}),(0,a.jsxs)(s.A.Group,{as:u.A,className:"mx-sm-3",children:[(0,a.jsx)(s.A.Label,{children:"EXL"}),(0,a.jsx)(s.A.Control,{type:"text",disabled:null===h,pattern:"[0-9]*(\\.[0-9]*)?",value:g,onChange:e=>{let{target:t}=e;return L(t.value)}})]}),(0,a.jsxs)(s.A.Group,{as:u.A,className:"mx-sm-3",children:[(0,a.jsx)(s.A.Label,{children:"Share (%)"}),(0,a.jsx)(s.A.Control,{type:"text",disabled:null===h,pattern:"[0-9]*(\\.[0-9]*)?",value:k,onChange:e=>{let{target:t}=e;return B(t.value)}})]})]}),(0,a.jsxs)(r.A,{children:[(0,a.jsx)(s.A.Group,{as:u.A,className:"mx-sm-3",children:(0,a.jsx)(p.V,{type:"submit",disabled:!w,className:"mb-4",children:"Buy EXL"})}),(0,a.jsx)(s.A.Group,{as:u.A,className:"mx-sm-3",children:(0,a.jsx)(p.V,{type:"button",disabled:w||!T,className:"mb-4",onClick:async()=>{m?await t.methods.withdrawAll().send({from:m}):I("wallet")},children:"Redeem EXL"})})]})]})},f=()=>{let e=(0,l.Yu)(),[t,n]=(0,i.useState)(null);return((0,i.useEffect)(()=>{e.active&&e.library?n(new e.library.eth.Contract(c.HV,"0x312B1f34D3348fE602353299F854a749cF1cD0bF")):n(null)},[e,e.active,e.library]),t)?(0,a.jsx)(h,{ico:t}):null}},400:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[562,649,586,506,203,202,774,441,517,358],()=>t(3928)),_N_E=e.O()}]);