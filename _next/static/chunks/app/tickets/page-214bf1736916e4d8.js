(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[512],{9566:(e,s,t)=>{Promise.resolve().then(t.bind(t,4788)),Promise.resolve().then(t.bind(t,8121)),Promise.resolve().then(t.bind(t,9026)),Promise.resolve().then(t.bind(t,8155)),Promise.resolve().then(t.bind(t,8810)),Promise.resolve().then(t.bind(t,8506)),Promise.resolve().then(t.bind(t,5366)),Promise.resolve().then(t.bind(t,5399)),Promise.resolve().then(t.t.bind(t,8173,23)),Promise.resolve().then(t.t.bind(t,7970,23)),Promise.resolve().then(t.bind(t,4798))},4788:(e,s,t)=>{"use strict";t.d(s,{MyTickets:()=>N});var a=t(5155),i=t(2115),r=t(5772),l=t(4265),n=t(2818);function c(e){return("0"+e).slice(-2)}function d(e){return Math.floor(100*parseFloat(l.Ay$.utils.fromWei(e,"ether")))/100}let o=e=>{let{date:s,children:t,onAction:i=null,actionTitle:r="More Details",actionEnabled:l=!0}=e;return(0,a.jsx)("div",{className:"draws__item",children:(0,a.jsxs)("div",{className:"draws__frame",children:[(0,a.jsxs)("div",{className:"draws__date",children:[c(s.getDate()),".",c(s.getMonth()+1),".",c(s.getFullYear())]}),(0,a.jsxs)("div",{className:"draws__main-shadow",children:[(0,a.jsx)("div",{className:"draws__main",children:t}),i?(0,a.jsx)("div",{className:"draws__buttons",children:(0,a.jsxs)("button",{disabled:!l,className:"btn btn-details",onClick:i,children:[(0,a.jsx)("span",{className:"btn-details__text",children:r}),(0,a.jsx)("span",{className:"btn-details__shadow"})]})}):null]})]})})};o.Jackpot=e=>{let{jackpot:s}=e;return(0,a.jsx)("div",{className:"draws__jackpot",children:(0,a.jsxs)("div",{className:"draws__jackpot-frame",children:[(0,a.jsx)("div",{className:"draws__jackpot-title",children:"Jackpot"}),(0,a.jsx)("div",{className:"draws__jackpot-container",children:(0,a.jsxs)("div",{className:"draws__jackpot-number",children:[d(s)," ",n.env.NEXT_PUBLIC_CURRENCY_NAME]})})]})})},o.Section=e=>{let{title:s,children:t}=e;return(0,a.jsx)("div",{className:"card-section__out",children:(0,a.jsxs)("div",{className:"card-section",children:[(0,a.jsx)("div",{className:"card-section__title",children:s}),(0,a.jsx)("div",{className:"card-section__body",children:t})]})})},o.Numbers=e=>{let{title:s,numbers:t,highlightedNumbers:i=[]}=e;return(0,a.jsx)("div",{className:"card-section__out",children:(0,a.jsxs)("div",{className:"card-section",children:[(0,a.jsx)("div",{className:"card-section__title",children:s}),(0,a.jsx)("div",{className:"card-section__body",children:t.map((e,s)=>{let t=null==i?void 0:i.includes(e);return(0,a.jsx)("div",{className:"card-section__item"+(t?" card-section__item--selected":""),children:(0,a.jsx)("div",{className:"card-section__text",children:e})},s)})})]})})},o.NoWin=()=>(0,a.jsx)("div",{className:"prize prize--empty",children:(0,a.jsx)("span",{className:"prize__text",children:"No Win!"})}),o.Prize=e=>{let{matches:s,prize:t}=e;return(0,a.jsxs)("div",{className:"prize",children:[(0,a.jsx)("div",{className:"prize__title",children:"You Won!"}),null!==t?(0,a.jsx)("div",{className:"prize__count",children:(0,a.jsxs)("div",{className:"prize__count-text",children:["Prize: ",d(t),(0,a.jsx)("span",{className:"prize__line prize__line--left"}),(0,a.jsx)("span",{className:"prize__line prize__line--right"})]})}):null,(0,a.jsxs)("div",{className:"prize__match",children:["Matches: ",s]})]})};var m=t(1490),_=t(5257),h=t(6662);let u=e=>{let{ticket:s,prize:t}=e;if(!t)return(0,a.jsx)(o.NoWin,{});let i=s.draw.numbers.map(e=>s.numbers.includes(e)).reduce((e,s)=>e+(s?1:0),0);return(0,a.jsx)(o.Prize,{matches:i,prize:t.toString()})},x=e=>{var s;let{lottery:t,ticket:l}=e,{account:n}=(0,r.Yu)(),[c,d]=(0,i.useState)(null),[m,_]=(0,i.useState)(!1);return(0,h.Zu)(async()=>{if(l.draw){let e=await t.getExtendedTicket(l);d(t.web3.utils.toBigInt(e.prize)),_(0!==e.withdrawBlockNumber)}},[t,l.draw,l.id]),(0,a.jsxs)(o,{date:l.date,onAction:c?()=>t.withdrawPrize(l.id,n):null,actionTitle:m?"Withdrawn":"Withdraw",actionEnabled:!m,children:[l.txHash?(0,a.jsx)(o.Section,{title:"Transaction",children:(0,a.jsxs)("a",{href:"https://".concat("polygonscan.com","/tx/").concat(l.txHash),target:"_blank",rel:"noreferrer",children:[l.txHash.substring(0,22),"â€¦"]})}):null,(0,a.jsx)(o.Numbers,{title:"Your Numbers",numbers:l.numbers,highlightedNumbers:null===(s=l.draw)||void 0===s?void 0:s.numbers}),l.draw?(0,a.jsx)(o.Numbers,{title:"Drawn Numbers",numbers:l.draw.numbers,highlightedNumbers:l.numbers}):null,l.draw&&c?(0,a.jsx)(u,{ticket:l,prize:c}):null]})},j=e=>{let{lottery:s,account:t}=e,[r,l]=(0,i.useState)([]);return(0,h.Zu)(async()=>{let e=(await s.getTicketIds(t)).sort((e,s)=>s-e);l(await Promise.all(e.map(e=>s.getTicket(e))))},[t,s]),(0,a.jsx)("section",{className:"draws d-flex justify-content-start align-items-center flex-column flex-lg-row align-items-lg-start",children:r.map((e,t)=>(0,a.jsx)(x,{lottery:s,ticket:e},t))})},N=()=>{let{context:e,lottery:s}=(0,m.z)();return(0,a.jsx)("section",{className:"past-draws",children:(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)(_._,{title:"My Tickets"}),(null==e?void 0:e.account)?(0,a.jsx)(j,{lottery:s,account:e.account}):(0,a.jsx)("article",{children:(0,a.jsx)("p",{className:"past-draws__descr",children:"Please connect your wallet."})})]})})}},5257:(e,s,t)=>{"use strict";t.d(s,{_:()=>i});var a=t(5155);let i=e=>{let{title:s}=e;return(0,a.jsx)("div",{className:"past-draws__title-out d-none d-lg-flex justify-content-center",children:(0,a.jsxs)("div",{className:"past-draws__title",children:[s,(0,a.jsx)("span",{className:"past-draws__title-line past-draws__title-line--left",children:(0,a.jsx)("span",{})}),(0,a.jsx)("span",{className:"past-draws__title-line past-draws__title-line--right",children:(0,a.jsx)("span",{})})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[586,506,370,554,441,517,358],()=>s(9566)),_N_E=e.O()}]);