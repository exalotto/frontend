(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[641],{5009:(e,t,a)=>{Promise.resolve().then(a.bind(a,2257))},2257:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>T});var s=a(5155),r=a(2115),l=a(8173),n=a.n(l),c=a(2841),o=a(4798),i=a(8121),d=a(8155),u=a(8810),x=a(1805),h=a(5366);let m=e=>{let{children:t}=e;return(0,s.jsx)("div",{className:"main-body",children:(0,s.jsxs)(u.ModalContainer,{children:[t,(0,s.jsx)(i.WalletModal,{}),(0,s.jsx)(x.DrawModal,{}),(0,s.jsx)(d.ReceiptModal,{}),(0,s.jsx)(u.MessageModal,{}),(0,s.jsx)(h.PrivacyPolicyOverlay,{}),(0,s.jsx)(i.WrongNetworkMessage,{})]})})};var f=a(5565),j=a(5399);a(9026);var g=a(8506);let p=()=>(0,s.jsxs)(n(),{href:"/",className:"logo d-flex align-items-center",children:[(0,s.jsx)(f.default,{src:j.default,className:"logo__img",alt:""}),(0,s.jsxs)("span",{className:"logo__text",children:[(0,s.jsx)("span",{className:"logo__text-colored",children:"Exa"}),"Lotto"]})]}),y=()=>(0,s.jsx)("div",{className:"header-out header-out--article",children:(0,s.jsx)(o.default,{children:(0,s.jsxs)("div",{className:"header d-flex justify-content-between align-items-start",children:[(0,s.jsx)(p,{}),(0,s.jsx)(g.NavigationMenu,{}),(0,s.jsx)(g.DropdownNavigationMenu,{}),(0,s.jsx)(i.ConnectButton,{})]})})});a(1491),a(400);let w=e=>{let{meta:{date:t}={},children:a}=e;return(0,s.jsxs)(m,{children:[(0,s.jsx)(y,{}),(0,s.jsx)("section",{className:"article",children:(0,s.jsx)(o.default,{children:(0,s.jsxs)("div",{className:"article__wrap d-flex justify-content-start align-items-start flex-column flex-lg-row",children:[(0,s.jsx)("aside",{className:"article__sidebar",children:(0,s.jsx)("div",{className:"article__date",children:t})}),(0,s.jsx)("article",{className:"article__body text",children:a})]})})})]})};var b=a(3818),v=a(5722),N=a(6662);function C(e){return e>=0&&e<10?"0"+e:""+e}let F=e=>{let{lottery:t}=e,[a,l]=(0,r.useState)(null);return(0,N.Zu)(async()=>{l(await t.getController())},[t]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{children:"Waiting for smartcontract..."}),a?(0,s.jsx)("p",{children:(0,s.jsx)(n(),{href:"https://".concat("polygonscan.com","/address/").concat(a.options.address,"#readContract#F5"),rel:"noreferrer",target:"_blank",children:"Check manually"})}):null]})},k=e=>{let{lottery:t,nextStart:a}=e,[l,n]=(0,r.useState)(a.getTime()-Date.now());return((0,r.useEffect)(()=>{let e=window.setInterval(()=>{n(a.getTime()-Date.now())},1e3);return()=>{window.clearInterval(e)}},[a]),a.getTime()<Date.now())?(0,s.jsx)(F,{lottery:t}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{children:["The next drawing window starts on"," ",(0,s.jsxs)("b",{children:[N.KR[a.getMonth()]," ",a.getDate(),", ",a.getFullYear()]})," ","at"," ",(0,s.jsxs)("b",{children:[C(a.getHours()),":",C(a.getMinutes())]})]}),(0,s.jsxs)("p",{children:["Countdown: ",Math.floor(l/864e5)," days, ",Math.floor(l%864e5/36e5)," hours, ",Math.floor(l%36e5/6e4)," minutes, ",Math.floor(l%6e4/1e3)," ","seconds"]})]})},R=e=>{let{lottery:t}=e,[a,l]=(0,r.useState)(null);return((0,N.Zu)(async()=>{l(await t.getTimeOfNextDraw())},[t]),a)?(0,s.jsx)(k,{lottery:t,nextStart:a}):(0,s.jsx)("p",{children:"Loading…"})},_=()=>(0,s.jsx)("div",{style:{margin:"auto",width:0,height:50,border:"1px solid #9bd7ff"}}),D=()=>{let{context:e,lottery:t}=(0,v.z)(),[a,l]=(0,r.useState)(!0),[n,o]=(0,r.useState)(""),[i,d]=(0,r.useState)(""),[x,h]=(0,r.useState)(!1),[m,f]=(0,r.useState)(!1),{showModal:j}=(0,u.U8)();return((0,N.Zu)(async()=>{if((null==e?void 0:e.account)&&t&&m){f(!1);try{await t.draw({vrfSubscriptionId:n||"41617763382229693832322505166859094426596297933876634542550589158799310321",vrfKeyHash:i||"0x719ed7d7664abc3001c18aac8130a2265e1e70b7e036ae20f3ca8b92b3154d86",nativePayment:x,signer:e.account})}catch(e){console.error(e),j("message","Error",""+e)}}},[null==e?void 0:e.account,t,m,n,i,x,j]),t)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{className:"text-center text-primary fw-bold",children:"1. Trigger"}),(0,s.jsxs)(c.A,{onSubmit:async a=>{a.preventDefault();try{(null==e?void 0:e.account)?await t.draw({vrfSubscriptionId:n||"41617763382229693832322505166859094426596297933876634542550589158799310321",vrfKeyHash:i||"0x719ed7d7664abc3001c18aac8130a2265e1e70b7e036ae20f3ca8b92b3154d86",nativePayment:x,signer:e.account}):(f(!0),await j("wallet"))}catch(e){console.error(e),await j("message","Error",""+e)}},children:[(0,s.jsx)(c.A.Check,{id:"use-default-settings",name:"settings",type:"radio",label:"Default settings",checked:a,onChange:e=>l(e.target.checked)}),(0,s.jsx)(c.A.Check,{id:"use-custom-settings",name:"settings",type:"radio",label:"Custom settings (advanced)",checked:!a,onChange:e=>l(!e.target.checked)}),a?null:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(c.A.Group,{className:"mt-3 ms-4",children:[(0,s.jsx)(c.A.Label,{htmlFor:"subscription-id",children:"VRF subscription ID"}),(0,s.jsx)(c.A.Control,{id:"subscription-id",type:"input",value:n,onChange:e=>o(e.target.value),placeholder:"Default: ".concat("41617763382229693832322505166859094426596297933876634542550589158799310321")})]}),(0,s.jsxs)(c.A.Group,{className:"mt-3 ms-4",children:[(0,s.jsx)(c.A.Label,{htmlFor:"key-hash",children:"VRF key hash"}),(0,s.jsx)(c.A.Control,{id:"key-hash",type:"input",value:i,onChange:e=>d(e.target.value),placeholder:"Default: ".concat("0x719ed7d7664abc3001c18aac8130a2265e1e70b7e036ae20f3ca8b92b3154d86"," for 500 Gwei")})]}),(0,s.jsx)(c.A.Check,{className:"mt-3 ms-4",id:"native-payment",type:"switch",label:"Native payment",checked:x,onChange:e=>h(e.target.checked)})]}),(0,s.jsx)("div",{className:"my-3 text-center",children:(0,s.jsx)(b.V,{type:"submit",children:"Draw!"})})]}),(0,s.jsx)(_,{}),(0,s.jsx)("h2",{className:"text-center text-secondary fw-bold",children:"2. Wait for VRF"}),(0,s.jsx)(_,{}),(0,s.jsx)("h2",{className:"text-center text-secondary fw-bold",children:"3. Close Round"})]}):null},S=e=>{let{lottery:t}=e,[a,l]=(0,r.useState)("");return(0,N.Zu)(async()=>{let e=await t.getPartialDrawData(),{drawTxHash:a}=await t.getExtendedPartialDrawData(e);a&&l(a)},[t]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{className:"text-center text-secondary fw-bold",children:"1. Trigger"}),(0,s.jsx)(_,{}),(0,s.jsx)("h2",{className:"text-center text-primary fw-bold",children:"2. Wait for VRF"}),a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{children:["VRF request at"," ",(0,s.jsx)(n(),{href:"https://".concat("polygonscan.com","/tx/").concat(a),rel:"noreferrer",target:"_blank",children:a})]}),(0,s.jsx)("p",{children:"Waiting for fulfillment…"})]}):null,(0,s.jsx)(_,{}),(0,s.jsx)("h2",{className:"text-center text-secondary fw-bold",children:"3. Close Round"})]})},M=()=>{let{context:e,lottery:t}=(0,v.z)(),[a,l]=(0,r.useState)(!1),{showModal:n}=(0,u.U8)();return((0,N.Zu)(async()=>{if(a&&t&&(null==e?void 0:e.account)){l(!1);try{await t.closeRound(e.account)}catch(e){console.error(e),n("message","Error",""+e)}}},[null==e?void 0:e.account,t,a,n]),t)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{className:"text-center text-secondary fw-bold",children:"1. Trigger"}),(0,s.jsx)(_,{}),(0,s.jsx)("h2",{className:"text-center text-secondary fw-bold",children:"2. Wait for VRF"}),(0,s.jsx)(_,{}),(0,s.jsx)("h2",{className:"text-center text-primary fw-bold",children:"3. Close Round"}),(0,s.jsx)("div",{className:"my-3 text-center",children:(0,s.jsx)(b.V,{onClick:async()=>{try{t&&(null==e?void 0:e.account)?await t.closeRound(e.account):(l(!0),await n("wallet"))}catch(e){console.error(e),await n("message","Error",""+e)}},children:"Close Round"})})]}):null},A=e=>{let{lottery:t}=e,[a,l]=(0,r.useState)(null);switch((0,N.Zu)(async()=>{let e=async()=>{await t.isOpen()?await t.canDraw()?l("trigger"):await t.isWaitingForClosure()?l("close"):l("round"):l("wait")},a=()=>{};try{let s=await t.web3.eth.subscribe("newBlockHeaders");s.on("data",e),a=()=>{s.removeAllListeners(),s.unsubscribe()}}catch(e){}return await e(),a},[t]),a){case"round":return(0,s.jsx)(R,{lottery:t});case"trigger":return(0,s.jsx)(D,{});case"wait":return(0,s.jsx)(S,{lottery:t});case"close":return(0,s.jsx)(M,{});default:return null}},L=()=>{let{lottery:e}=(0,v.z)();return e?(0,s.jsx)(A,{lottery:e}):(0,s.jsx)("p",{children:"Loading…"})};function T(){return(0,s.jsxs)(w,{meta:{},children:[(0,s.jsx)("h1",{children:"Weekly Drawing"}),(0,s.jsx)(L,{})]})}},3667:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var s=a(4617),r=a.n(s),l=a(2115),n=a(1653),c=a(5155);let o=l.forwardRef((e,t)=>{let[{className:a,...s},{as:l="div",bsPrefix:o,spans:i}]=function(e){let{as:t,bsPrefix:a,className:s,...l}=e;a=(0,n.oU)(a,"col");let c=(0,n.gy)(),o=(0,n.Jm)(),i=[],d=[];return c.forEach(e=>{let t,s,r;let n=l[e];delete l[e],"object"==typeof n&&null!=n?{span:t,offset:s,order:r}=n:t=n;let c=e!==o?"-".concat(e):"";t&&i.push(!0===t?"".concat(a).concat(c):"".concat(a).concat(c,"-").concat(t)),null!=r&&d.push("order".concat(c,"-").concat(r)),null!=s&&d.push("offset".concat(c,"-").concat(s))}),[{...l,className:r()(s,...i,...d)},{as:t,bsPrefix:a,spans:i}]}(e);return(0,c.jsx)(l,{...s,ref:t,className:r()(a,!i.length&&o)})});o.displayName="Col";let i=o},2841:(e,t,a)=>{"use strict";a.d(t,{A:()=>M});var s=a(4617),r=a.n(s),l=a(1996),n=a.n(l),c=a(2115),o=a(5155);let i={type:n().string,tooltip:n().bool,as:n().elementType},d=c.forwardRef((e,t)=>{let{as:a="div",className:s,type:l="valid",tooltip:n=!1,...c}=e;return(0,o.jsx)(a,{...c,ref:t,className:r()(s,"".concat(l,"-").concat(n?"tooltip":"feedback"))})});d.displayName="Feedback",d.propTypes=i;let u=c.createContext({});var x=a(1653);let h=c.forwardRef((e,t)=>{let{id:a,bsPrefix:s,className:l,type:n="checkbox",isValid:i=!1,isInvalid:d=!1,as:h="input",...m}=e,{controlId:f}=(0,c.useContext)(u);return s=(0,x.oU)(s,"form-check-input"),(0,o.jsx)(h,{...m,ref:t,type:n,id:a||f,className:r()(l,s,i&&"is-valid",d&&"is-invalid")})});h.displayName="FormCheckInput";let m=c.forwardRef((e,t)=>{let{bsPrefix:a,className:s,htmlFor:l,...n}=e,{controlId:i}=(0,c.useContext)(u);return a=(0,x.oU)(a,"form-check-label"),(0,o.jsx)("label",{...n,ref:t,htmlFor:l||i,className:r()(s,a)})});m.displayName="FormCheckLabel";let f=c.forwardRef((e,t)=>{let{id:a,bsPrefix:s,bsSwitchPrefix:l,inline:n=!1,reverse:i=!1,disabled:f=!1,isValid:j=!1,isInvalid:g=!1,feedbackTooltip:p=!1,feedback:y,feedbackType:w,className:b,style:v,title:N="",type:C="checkbox",label:F,children:k,as:R="input",..._}=e;s=(0,x.oU)(s,"form-check"),l=(0,x.oU)(l,"form-switch");let{controlId:D}=(0,c.useContext)(u),S=(0,c.useMemo)(()=>({controlId:a||D}),[D,a]),M=!k&&null!=F&&!1!==F||c.Children.toArray(k).some(e=>c.isValidElement(e)&&e.type===m),A=(0,o.jsx)(h,{..._,type:"switch"===C?"checkbox":C,ref:t,isValid:j,isInvalid:g,disabled:f,as:R});return(0,o.jsx)(u.Provider,{value:S,children:(0,o.jsx)("div",{style:v,className:r()(b,M&&s,n&&"".concat(s,"-inline"),i&&"".concat(s,"-reverse"),"switch"===C&&l),children:k||(0,o.jsxs)(o.Fragment,{children:[A,M&&(0,o.jsx)(m,{title:N,children:F}),y&&(0,o.jsx)(d,{type:w,tooltip:p,children:y})]})})})});f.displayName="FormCheck";let j=Object.assign(f,{Input:h,Label:m});a(1809);let g=c.forwardRef((e,t)=>{let{bsPrefix:a,type:s,size:l,htmlSize:n,id:i,className:d,isValid:h=!1,isInvalid:m=!1,plaintext:f,readOnly:j,as:g="input",...p}=e,{controlId:y}=(0,c.useContext)(u);return a=(0,x.oU)(a,"form-control"),(0,o.jsx)(g,{...p,type:s,size:n,ref:t,readOnly:j,id:i||y,className:r()(d,f?"".concat(a,"-plaintext"):a,l&&"".concat(a,"-").concat(l),"color"===s&&"".concat(a,"-color"),h&&"is-valid",m&&"is-invalid")})});g.displayName="FormControl";let p=Object.assign(g,{Feedback:d}),y=c.forwardRef((e,t)=>{let{className:a,bsPrefix:s,as:l="div",...n}=e;return s=(0,x.oU)(s,"form-floating"),(0,o.jsx)(l,{ref:t,className:r()(a,s),...n})});y.displayName="FormFloating";let w=c.forwardRef((e,t)=>{let{controlId:a,as:s="div",...r}=e,l=(0,c.useMemo)(()=>({controlId:a}),[a]);return(0,o.jsx)(u.Provider,{value:l,children:(0,o.jsx)(s,{...r,ref:t})})});w.displayName="FormGroup";var b=a(3667);let v=c.forwardRef((e,t)=>{let{as:a="label",bsPrefix:s,column:l=!1,visuallyHidden:n=!1,className:i,htmlFor:d,...h}=e,{controlId:m}=(0,c.useContext)(u);s=(0,x.oU)(s,"form-label");let f="col-form-label";"string"==typeof l&&(f="".concat(f," ").concat(f,"-").concat(l));let j=r()(i,s,n&&"visually-hidden",l&&f);return(d=d||m,l)?(0,o.jsx)(b.A,{ref:t,as:"label",className:j,htmlFor:d,...h}):(0,o.jsx)(a,{ref:t,className:j,htmlFor:d,...h})});v.displayName="FormLabel";let N=c.forwardRef((e,t)=>{let{bsPrefix:a,className:s,id:l,...n}=e,{controlId:i}=(0,c.useContext)(u);return a=(0,x.oU)(a,"form-range"),(0,o.jsx)("input",{...n,type:"range",ref:t,className:r()(s,a),id:l||i})});N.displayName="FormRange";let C=c.forwardRef((e,t)=>{let{bsPrefix:a,size:s,htmlSize:l,className:n,isValid:i=!1,isInvalid:d=!1,id:h,...m}=e,{controlId:f}=(0,c.useContext)(u);return a=(0,x.oU)(a,"form-select"),(0,o.jsx)("select",{...m,size:l,ref:t,className:r()(n,a,s&&"".concat(a,"-").concat(s),i&&"is-valid",d&&"is-invalid"),id:h||f})});C.displayName="FormSelect";let F=c.forwardRef((e,t)=>{let{bsPrefix:a,className:s,as:l="small",muted:n,...c}=e;return a=(0,x.oU)(a,"form-text"),(0,o.jsx)(l,{...c,ref:t,className:r()(s,a,n&&"text-muted")})});F.displayName="FormText";let k=c.forwardRef((e,t)=>(0,o.jsx)(j,{...e,ref:t,type:"switch"}));k.displayName="Switch";let R=Object.assign(k,{Input:j.Input,Label:j.Label}),_=c.forwardRef((e,t)=>{let{bsPrefix:a,className:s,children:l,controlId:n,label:c,...i}=e;return a=(0,x.oU)(a,"form-floating"),(0,o.jsxs)(w,{ref:t,className:r()(s,a),controlId:n,...i,children:[l,(0,o.jsx)("label",{htmlFor:n,children:c})]})});_.displayName="FloatingLabel";let D={_ref:n().any,validated:n().bool,as:n().elementType},S=c.forwardRef((e,t)=>{let{className:a,validated:s,as:l="form",...n}=e;return(0,o.jsx)(l,{...n,ref:t,className:r()(a,s&&"was-validated")})});S.displayName="Form",S.propTypes=D;let M=Object.assign(S,{Group:w,Control:p,Floating:y,Check:j,Switch:R,Label:v,Text:F,Range:N,Select:C,FloatingLabel:_})},1491:()=>{},400:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[562,649,586,506,202,774,441,517,358],()=>t(5009)),_N_E=e.O()}]);